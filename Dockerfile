FROM jenkins/jenkins:lts

USER root

# Install AWS CLI
RUN apt-get update && \
    apt-get install -y python3-pip && \
    pip3 install awscli && \
    rm -rf /var/lib/apt/lists/*

# Install custom plugins
#RUN jenkins-plugin-cli --plugins "snyk-security-scanner:2.12.1 file-operations:1.11 branch-api:2.5.6 pipeline-build-step:2.13 workflow-support:3.8 aws-credentials:1.28 subversion:2.13.1 github-branch-source:2.7.1 publish-over-ftp:1.15 cloudbees-folder:6.740.ve4f4ffa_dea_54"
#RUN jenkins-plugin-cli --plugins "snyk-security-scanner:2.12.1 file-operations:1.11 branch-api:2.5.6 pipeline-build-step:2.13 workflow-support:3.8 aws-credentials:1.28 subversion:2.13.1 github-branch-source:2.7.1 publish-over-ftp:1.15 cloudbees-folder:6.740.ve4f4ffa_dea_54 javadoc:1.5 workflow-job:2.41 jsch:0.1.55.2 github-pullrequest:0.2.8 structs:324.va_f5d6774f3a_d pipeline-model-api:1.6.0 jquery3-api:3.6.0-1 uno-choice:2.4 synopsys-polaris:1.1.0 powershell:1.4 pipeline-model-extensions:1.6.0 pipeline-model-declarative-agent:1.1.1 emailext-template:1.2 jakarta-activation-api:2.0.1-2 jackson2-api:2.14.1-313.v504cdd45c18b display-url-api:2.3.6 favorite:2.3.2 multi-branch-project-plugin:0.7 build-timestamp:1.0.3 github-api:1.111 docker-build-publish:1.3.2 azure-sdk:118.v43f74dd9ca_dc blueocean-rest:1.23.2 pipeline-model-definition:1.6.0 job-direct-mail:1.5 gradle:1.36 popper-api:1.16.1-2 build-pipeline-plugin:1.5.8 variant:1.3 copyartifact:1.45.1 git:4.2.2 ssh-slaves:1.31.2 antisamy-markup-formatter:2.0 sshd:3.0.3 jquery:1.12.4-1 matrix-project:1.20 email-ext:2.83 caffeine-api:2.9.3-65.v6a_47d0f4d1fe docker-plugin:1.2.0 publish-over:0.22 copy-data-to-workspace-plugin:1.0 jakarta-mail-api:2.0.1-2 build-name-setter:2.1.0 workflow-multibranch:2.22 run-condition:1.3 role-strategy:3.1 momentjs:1.1.1 azure-ad:306.va_7083923fd50 git-client:3.2.1 workflow-aggregator:2.6 environment-script:1.2.5 blueocean-commons:1.23.2 docker-workflow:1.24 workflow-cps-global-lib:2.16 lockable-resources:2.8 pipeline-milestone-step:1.3.1 pam-auth:1.6 build-timeout:1.20 multiple-scms:0.6 swarm:3.19 blueocean-rest-impl:1.23.2 pipeline-graph-analysis:1.10 apache-httpcomponents-client-4-api:4.5.10-2.0 envinject:2.3.0 javax-activation-api:1.2.0-5 thinBackup:1.10 msbuild:1.29 htmlpublisher:1.23 jackson-databind:2.8.10.1 resource-disposer:0.14 config-file-provider:3.8.0 docker-build-step:2.5 deploy:1.15 jenkins-testswarm-plugin:1.2 junit:1.50 workflow-scm-step:2.11 ivy:2.1 credentials-binding:1.23 matrix-auth:3.1.5 jdk-tool:1.4 plain-credentials:1.7 docker-commons:1.16 mailer:435.438.v5b_81173f5b_a_1 plugin-util-api:2.2.0 blueocean-web:1.23.2 scm-api:2.6.4 python:1.3 pipeline-rest-api:2.13 script-security:1.77 trilead-api:1.0.6 jenkins-design-language:1.23.2 font-awesome-api:5.15.3-2 blueocean-jwt:1.23.2 docker-java-api:3.1.5.2 windows-slaves:1.8.1 echarts-api:5.1.0-2 envinject-api:1.7 token-macro:2.13 pipeline-stage-step:2.5 ws-cleanup:0.38 credentials:1143.vb_e8b_b_ceee347 git-server:1.9 docker-swarm:1.9 pipeline-github-lib:1.0 python-wrapper:1.0.3 handlebars:1.1.1 aws-java-sdk:1.11.723 pipeline-stage-tags-metadata:1.6.0 snakeyaml-api:1.33-90.v80dcb_3814d35 oauth-credentials:0.4 bouncycastle-api:2.25 github:1.30.0 pipeline-input-step:2.11 shiningpanda:0.24 pipeline-stage-view:2.13 workflow-api:2.42 authentication-tokens:1.3 ssh-agent:1.20 parameterized-trigger:2.37 ant:1.11 poll-mailbox-trigger-plugin:1.026 workflow-basic-steps:2.20 external-monitor-job:1.7 mapdb-api:1.0.9.0 timestamper:1.11.5 jquery-detached:1.2.1 template-workflows:1.2 pubsub-light:1.13 jaxb:2.3.7-1 blueocean-core-js:1.23.2 command-launcher:1.4 ace-editor:1.1 okhttp-api:4.9.3-108.v0feda04578cf nodelabelparameter:1.7.2 conditional-buildstep:1.3.6 ldap:1.24 blueocean-pipeline-api-impl:1.23.2 extra-columns:1.22 ssh-credentials:1.18.1 checks-api:1.7.0 blueocean-pipeline-scm-api:1.23.2 Office-365-Connector:4.13.2 bootstrap4-api:4.6.0-3 authorize-project:1.3.0 workflow-cps:2.80 jcaptcha-plugin:1.1 mailcommander:1.0.0 icon-shim:2.0.3 javax-mail-api:1.6.2-5 durable-task:1.34 maven-plugin:3.7 scriptler:3.1 pipeline-utility-steps:2.6.1 workflow-durable-task-step:2.35 workflow-step-api:2.23"
RUN jenkins-plugin-cli --plugins "ws-cleanup:0.44 jaxb:2.3.8-1 workflow-api:1208.v0cc7c6e0da_9e gradle:2.3 authentication-tokens:1.4 build-timeout:1.28 ldap:659.v8ca_b_a_fe79fa_d snakeyaml-api:1.33-95.va_b_a_e3e47b_fa_4 bootstrap5-api:5.2.1-3 javax-activation-api:1.2.0-6 script-security:1229.v4880b_b_e905a_6 aws-java-sdk-ec2:1.12.406-370.v8f993c987059 kubernetes-cli:1.12.0 mailer:448.v5b_97805e3767 plain-credentials:143.v1b_df8b_d3b_e48 token-macro:321.vd7cc1f2a_52c8 ant:481.v7b_09e538fcca jdk-tool:63.v62d2fd4b_4793 instance-identity:142.v04572ca_5b_265 pipeline-graph-analysis:202.va_d268e64deb_3 pipeline-stage-tags-metadata:2.2118.v31fd5b_9944b_5 aws-java-sdk-efs:1.12.406-370.v8f993c987059 variant:59.vf075fe829ccb docker-java-api:3.2.13-68.va_875df25a_b_45 uno-choice:2.6.4 metrics:4.2.13-420.vea_2f17932dd6 pam-auth:1.1 pipeline-model-extensions:2.2118.v31fd5b_9944b_5 jakarta-mail-api:2.0.1-3 pipeline-aws:1.43 bouncycastle-api:2.27 pipeline-build-step:2.18.1 matrix-project:785.v06b_7f47b_c631 durable-task:504.vb10d1ae5ba2f junit:1177.v90374a_ef4d09 aws-java-sdk-iam:1.12.406-370.v8f993c987059 workflow-cps:3618.v13db_a_21f0fcf git-client:4.1.0 aws-java-sdk-minimal:1.12.406-370.v8f993c987059 mina-sshd-api-core:2.9.2-50.va_0e1f42659a_a aws-java-sdk-sqs:1.12.406-370.v8f993c987059 timestamper:1.22 structs:324.va_f5d6774f3a_d okhttp-api:4.10.0-125.v3593b_a_f8c97b_ pipeline-github-lib:38.v445716ea_edda_ docker-commons:1.21 aws-java-sdk-codebuild:1.12.406-370.v8f993c987059 commons-lang3-api:3.12.0-36.vd97de6465d5b_ kubernetes:3883.v4d70a_a_a_df034 workflow-durable-task-step:1234.v019404b_3832a kubernetes-credentials:0.10.0 workflow-step-api:639.v6eca_cd8c04a_a_ credentials:1214.v1de940103927 pipeline-model-api:2.2118.v31fd5b_9944b_5 display-url-api:2.3.7 pipeline-input-step:466.v6d0a_5df34f81 ssh-credentials:305.v8f4381501156 font-awesome-api:6.2.1-1 email-ext:2.94 jquery3-api:3.6.1-2 scm-api:631.v9143df5b_e4a_a pipeline-stage-step:305.ve96d0205c1c6 matrix-auth:3.1.6 pipeline-milestone-step:111.v449306f708b_7 workflow-aggregator:590.v6a_d052e5a_a_b_5 workflow-job:1268.v6eb_e2ee1a_85a kubernetes-client-api:6.4.1-208.vfe09a_9362c2c checks-api:1.8.1 antisamy-markup-formatter:155.v795fb_8702324 ssh-slaves:2.854.v7fd446b_337c9 sshd:3.275.v9e17c10f2571 resource-disposer:0.21 jackson2-api:2.14.2-319.v37853346a_229 aws-credentials:191.vcb_f183ce58b_9 plugin-util-api:2.20.0 aws-java-sdk-ecr:1.12.406-370.v8f993c987059 pipeline-stage-view:2.31 javax-mail-api:1.6.2-9 workflow-multibranch:733.v109046189126 aws-java-sdk-sns:1.12.406-370.v8f993c987059 git:5.0.0 pipeline-model-definition:2.2118.v31fd5b_9944b_5 docker-plugin:1.3.0 command-launcher:90.v669d7ccb_7c31 trilead-api:2.84.v72119de229b_7 branch-api:2.1071.v1a_188a_562481 caffeine-api:2.9.3-65.v6a_47d0f4d1fe popper2-api:2.11.6-2 pipeline-groovy-lib:629.vb_5627b_ee2104 mina-sshd-api-common:2.9.2-50.va_0e1f42659a_a aws-java-sdk-ecs:1.12.406-370.v8f993c987059 github:1.37.0 apache-httpcomponents-client-4-api:4.5.13-138.v4e7d9a_7b_a_e61 aws-java-sdk-elasticbeanstalk:1.12.406-370.v8f993c987059 ionicons-api:31.v4757b_6987003 credentials-binding:523.vd859a_4b_122e6 echarts-api:5.4.0-1 aws-java-sdk-ssm:1.12.406-370.v8f993c987059 aws-java-sdk-logs:1.12.406-370.v8f993c987059 cloudbees-folder:6.800.v71307ca_b_986b jakarta-activation-api:2.0.1-3 github-branch-source:1701.v00cc8184df93 aws-java-sdk-cloudformation:1.12.406-370.v8f993c987059 jjwt-api:0.11.5-77.v646c772fddb_0 commons-text-api:1.10.0-27.vb_fa_3896786a_7 workflow-scm-step:400.v6b_89a_1317c9a_ github-api:1.303-400.v35c2d8258028 workflow-support:839.v35e2736cfd5c workflow-basic-steps:1010.vf7a_b_98e847c1 aws-java-sdk:1.12.406-370.v8f993c987059 pipeline-rest-api:2.31"
# Set environment variables
# ENV <ENV_VARIABLE_1> <VALUE>
# ENV <ENV_VARIABLE_2> <VALUE>

USER jenkins
